<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>TooltipsHW</title>
	<link rel="stylesheet" type="text/css" href="tooltip_hw.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
	<script src="http://code.jquery.com/jquery-1.12.0.min.js"></script>
	<script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>
<body>
	<div class="wrapper">
		<header>
			

		</header>
		<div class="main">
			<h2>Космос жив!</h2>
			<p>
				Космос многолик в проявлениях, тут и черные дыры, вершина всего непознанного, и вспышки на Солнце, кормильце живого на Земле, и мерцание манящих к себе звезд, и таинственные бури, происходящие в пустоте. Все многообразие изображений, заставляет задуматься о вечном, и не размениваться по пустякам, не тратить свою жизнь на мелочные споры и ссоры, тем самым, восстанавливая душевное равновесие и выводя из состояния вечного стресса, который преследует в наш трудный век.
			</p>
			<p>
				И это, без сомнения, правда. Например, потрясающие фотографии с телескопа Хаббл, самой известной Большой обсерватории НАСА, позволяют увидеть то, что никогда не было доступно человеческому глазу.
			</p>

			<p>
				Невиданные ранее далекие галактики и туманности, умирающие и рождающиеся звезды поражают воображение своим разнообразием, подталкивают к мечте о далеких путешествиях. Сказочные пейзажи из звездной пыли и газовых облаков открывают перед нами потрясающие по своей красоте загадочные явления. 
			</p>
			<div class="image-wrapper">
			
				<img src="images/keel.jpg" data-tooltip="Столб и джеты в туманности Киля" data-placement="right">
			</div>
			<p>
				Этот космический газопылевой столб имеет в ширину два световых года. Структура находится в одной из самых крупных областей звездообразования нашей Галактики, туманности Киля, которая видна на южном небе и удалена от нас на 7500 световых лет. 
			</p>
			<div class="image-wrapper">
				<img src="images/andromeda.jpg" data-tooltip="Галактика Андромеды" data-placement="top">
			</div>
			<p>
				Галактика Андромеды — самая близкая к нашему Млечному Пути из гигантских галактик. Скорее всего, наша галактика выглядит примерно так же, как и эта. Сотни миллиардов звезд, составляющих галактику Андромеды, вместе дают видимое диффузное свечение. Отдельные звезды на изображении являются в действительности звездами нашей Галактики, расположенными гораздо ближе удаленного объекта. 
			</p>
			<div class="image-wrapper">
				<img src="images/lion.jpg" data-tooltip="Спиральная галактика NGC 3521" data-placement="bottom">
			</div>
			<p>
				Спиральная галактика NGC 3521 находится на расстоянии всего лишь 35 миллионов световых лет от нас в направлении на созвездие Льва. Галактика, простирающаяся на 50 000 световых лет, обладает такими особенностями, как рваные спиральные рукава неправильной формы, украшенные пылью, розоватые области звездообразования и скопления молодых голубоватых звёзд. 
			</p>
			<div class="image-wrapper">
				<img src="images/omega.jpg" data-tooltip="Туманность Омега находится в богатом туманностями созвездии Стрельца" data-placement="left">
			</div>
			<p>
				Сформированные звездными ветрами и излучением, эти фантастические, похожие на волны образования находятся в туманности Омега и входят в область звездообразования. Туманность Омега находится в богатом туманностями созвездии Стрельца и удалена на расстояние 5500 световых лет. Клочковатые сгущения плотного и холодного газа и пыли освещены излучением звезд, находящихся на изображении вверху справа, в будущем они могут стать местами звездообразования. 
			</p>
		</div>

		
		<footer>
			
		</footer>
	</div><!--wrapper-->
<script>
// (function(){
// 	$('[data-tooltip]').on('mouseover', function(){
// 		var text = $(this).attr('data-tooltip');
// 		var tooltipHtml = '<div class="tooltip-wrapper"><div class="tooltip"><p>' + text + '</p></div></div>';
// 		console.log(text);
// 	$(this).before(tooltipHtml);
// 		var imageWidth = $(this).outerWidth(),
// 			imageHeight = $(this).outerHeight();
// 		console.log(imageWidth, imageHeight);
// 	if (imageWidth < 120){
// 		imageWidth = 120;
// 	}else if (imageWidth > 400){
// 		imageWidth = imageWidth;
// 	}

// 	var tooltipBlock = $(this).prev();
// 	tooltipBlock.css({"width": imageWidth});

// 	var textHeight = tooltipBlock.find(".tooltip").outerHeight();
// 	console.log(textHeight);

// 	var fullHeight = textHeight + imageHeight;
// 		tooltipBlock.css({'height': fullHeight});


// 		tooltipBlock.on("mouseout", function(){
// 			$(this).remove();
// 		});
// 	});
// })();//работает верно

(function(){
	$('[data-tooltip]').on('mouseover', function(){
	var text = $(this).attr('data-tooltip');
	var tooltipHtml = '<div class="tooltip-wrapper"><div class="tooltip"><p>' + text + '</p></div></div>';

	$(this).before(tooltipHtml);

	var imageWidth = $(this).outerWidth(),// return img width + padding
		imageHeight = $(this).outerHeight();// return img height + padding
		console.log('imageWidth' + imageWidth);
		console.log('imageHeight' + imageHeight);
	//min-max - image width
	if (imageWidth < 120){
		imageWidth = 120;
	}else if (imageWidth > 400){
		imageWidth = imageWidth;
	}
	

	var tooltipBlock = $(this).prev();

	tooltipBlock.css({"width": imageWidth});

	var textHeight = tooltipBlock.find(".tooltip").outerHeight();
	var textWidth = tooltipBlock.find(".tooltip").outerWidth();
	console.log(textWidth);
	var fullWidth = imageWidth + textWidth;
	console.log(fullWidth);
	
	var fullHeight = textHeight + imageHeight;
	var fullHeight = textHeight + imageHeight;
		//tooltipBlock.css({'height': fullHeight});
	

		tooltipBlock.css({'height': fullHeight});


	

		var toolTipLocation = $(this).attr('data-placement');
		console.log(toolTipLocation);

		if($( this ).is ('[data-placement="top"]')){
			tooltipBlock.css({'top': -textHeight});
			tooltipBlock.find('.tooltip').css({"margin": "0 auto"});
		}else if ($( this ).is ('[data-placement="bottom"]')){

			tooltipBlock.css({'top': '0', 'justify-content': 'flex-end'});
			tooltipBlock.find('.tooltip').css({"margin": "0 auto"});
		}else if ($( this ).is ('[data-placement="right"]')){
			tooltipBlock.css({'height': imageHeight, 'width': fullWidth});
			tooltipBlock.find(".tooltip").css({'align-self': "flex-end"})
		}else if ($( this ).is ('[data-placement="left"]')){
			tooltipBlock.css({'height': imageHeight, 'width': fullWidth, "left": '0'});
			tooltipBlock.find(".tooltip").css({'align-self': "flex-start"});
		}
	


		tooltipBlock.on("mouseout", function(){
			$(this).remove();
		});
	});


})()
	

</script>
</body>
</html>


